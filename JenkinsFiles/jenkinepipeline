node {

stage('Git CheckOut') {    
git branch: 'main', url: 'https://github.com/AmitGawali4/DevopsTraining-12Oct.git'
}


stage('Maven Clean') {    
sh 'mvn clean -f 02Jenkins/petclinic-code/pom.xml'
}

stage('Maven Compiling') {    
sh 'mvn compile -f 02Jenkins/petclinic-code/pom.xml'
}

stage('Maven Testing') {    
sh 'mvn test -f 02Jenkins/petclinic-code/pom.xml'
}

stage('Maven Packaging ') {    
sh 'mvn package -f 02Jenkins/petclinic-code/pom.xml'
}

stage('Archiving Artifacts') {    
archive '02Jenkins/petclinic-code/target/*.war'
}

stage('Deploy Petclinic Code into Docker Env.') {
sh 'docker-compose up -d --build'
}}
